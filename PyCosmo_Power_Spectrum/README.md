# PyCosmo Power Spectrum Generator

This repository sets up a Python-based environment for computing cosmological power spectra using a custom wrapper built on PyCosmo and GSL (GNU Scientific Library). The build is managed using make.

## Project structure
```
PyCosmo_Power_Spectrum/
│
├── Functions/                     # Custom function modules
├── initial_conditions/            # Initial condition .csv files generated by N-GenIC
├── output_plots/                  # Plots of the powerspectrum generated by PyCosmo
├── outputted_power_spectrum/      # Power spectrum file generated by PyCosmo
├── parameter_files/               # Input parameter files read by PyCosmo
├── plotting/                      # .mplstyle file for generating plots
├── power_spectrum_generation/     # Main power spectrum generation code
├── tests/                         # Unit and integration tests
│
├── __init__.py                    # Package initializer
├── Makefile                       # Automation script for setup and execution
├── README.md                      # Project documentation
├── requirements.txt               # Python dependencies
├── .gitignore                     # Git ignore rules
├── .gitattributes                 # Git attributes config
```

## Requirements
* Python 3.9
* Make
* GSL (GNU Scientific Library)
* System Package Manager:
    * ```apt``` for Linux/WSL
    * ```brew``` for macOS

## Setup Instructions

### 1. Clone the repository

```bash
git clone https://github.com/your-repo/power-spectrum-generator.git
cd power-spectrum-generator
```

### 2. Run Setup

```bash
make setup
```

This will:
* Create a Python 3.9 virtual environment
* Install Python dependencies
* Install system dependencies (GSL, LaTeX tools, etc.)

If python3.9 is not found, install it using your system’s package manager.

## Usage

Run the power spectrum generator:
```bash
make
```

This executes:
```bash
python -m power_spectrum_generation.custom_power_spectrum pycosmo_input_32.param
```

## Testing

Run unit tests:
```bash
make test
```

Run full test suite (clears cache, reinstalls system deps):
```bash
make test_full
```

## Cleaning 

Remove build artifacts, .pyc files, virtual environment:
```bash
make clean
```

To clear the sympy2c cache
```bash
make clear_cache
```